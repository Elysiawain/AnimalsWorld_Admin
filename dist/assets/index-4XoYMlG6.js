/* empty css                  *//* empty css               */import{u as ge,_ as xe,A as he,b as oe,c as le}from"./animal-A4hk0vHu.js";/* empty css                  *//* empty css                 *//* empty css                     *//* empty css                */import{u as ye}from"./Request-KrwjXiK_.js";import{b as we,c as ne}from"./Admin-FvYD-xaN.js";import{d as ie,r as c,b as D,c as v,e as L,h as a,j as i,t as j,f as e,g as t,F as De,G as Le,k as f,a1 as Ue,p as ce,l as P,a2 as Ie,_ as re,o as be,D as Ce,n as Ee,H as _,U as ke,a3 as Re,a4 as S,a5 as Ae,a6 as Be,K as Ve,a7 as se,a8 as ze,a9 as Se,a0 as je,aa as Ne,J as $e}from"./index-qEOnZ1yg.js";/* empty css                  */const Me={class:"detail"},Te={class:"detail-item"},Oe={key:0,style:{"margin-top":"20px",display:"flex","justify-content":"center"}},qe=ie({__name:"AdminDetail",props:{title:String,animalData:Object},emits:["closeEditDrawer"],setup(U,{emit:h}){const g=U,o=c(4),R=()=>{var r;o.value=(r=g.animalData)==null?void 0:r.length},A=ge(),I=c(""),x=c(!1),p=r=>{x.value=r},B=async r=>{const C=await oe(r.id);l.value=C.data.animalList[0],I.value="编辑动物",l.value.imgList.forEach(y=>{y.uid,y.url})},l=c({animalID:"",imgList:[{uid:"",url:""}],score:0,searchCount:0,tags:"",name:"",imgURL:"",description:"",classification:"",distribution:"",protectionLevel:"",diet:"",breeding:"",lifestyle:"",predator:""}),N=h,b=()=>{x.value=!1,l.value={},l.value.imgURL="",l.value.imgList=[{uid:"",url:""}],N("closeEditDrawer")};return(r,C)=>{var w,m;const y=D("ArrowRightBold"),E=ce,$=D("Expand"),M=Ie,k=xe;return v(),L("div",Me,[a("h3",null,[a("span",null,[i(j(U.title)+" ",1),e(E,null,{default:t(()=>[e(y)]),_:1})]),a("span",{onClick:R},[i("查看更多"),e(E,{size:18},{default:t(()=>[e($)]),_:1})])]),e(M),a("div",Te,[(v(!0),L(De,null,Le((w=U.animalData)==null?void 0:w.slice(0,o.value),V=>(v(),P(he,{key:V,"animal-data":V,drawer:x.value,class:"item",onUpdateDrawer:p,onInitAnimal:B},null,8,["animal-data","drawer"]))),128)),e(k,{"add-animal-forms":l.value,drawer:x.value,drawer_title:I.value,options:f(A).classfication,onCloseDrawer:b},null,8,["add-animal-forms","drawer","drawer_title","options"])]),o.value===((m=U.animalData)==null?void 0:m.length)?(v(),L("div",Oe," 已经没有了(●'◡'●)~ ")):Ue("",!0)])}}}),F=re(qe,[["__scopeId","data-v-7efe0720"]]),Fe={class:"container"},Pe={class:"content"},Ge={class:"admin-detail"},He={class:"info-avatar"},Je=["src"],Ke={class:"info-name"},Qe={class:"info-ID"},We={class:"info-message"},Xe={class:"info-statistic"},Ye={class:"statistic-card"},Ze={style:{display:"inline-flex","align-items":"center","font-size":"20px"}},et={style:{display:"flex","align-items":"center"}},tt={class:"statistic-card"},at={style:{display:"inline-flex","align-items":"center","font-size":"20px"}},lt={style:{display:"flex","align-items":"center"}},nt={class:"statistic-card"},st={style:{display:"inline-flex","align-items":"center","font-size":"20px"}},ot={style:{display:"flex","align-items":"center"}},it={style:{"font-size":"20px"}},ct={class:"edit-form",style:{display:"flex","flex-direction":"column"}},rt=["src"],dt={style:{flex:"auto"}},ut={style:{"font-size":"20px"}},mt={class:"edit-form",style:{display:"flex","flex-direction":"column"}},_t=["src"],vt={style:{flex:"auto"}},pt={class:"content data"},ft=ie({__name:"index",setup(U){var G,H;const h=c(!1),g=ye(),o=c({}),R=c([]),A=c([]),I=c([]),x=async()=>{h.value=!0;try{const{data:n}=await we(g.admin.adminID);o.value=n.admin,R.value=await w(o.value.audit.toString()),A.value=await w(o.value.addCount.toString()),I.value=await w(o.value.editCount.toString()),h.value=!1}catch{_.error("获取数据失败！"),h.value=!1;return}};be(()=>x());const p=c(!1),B=c("rtl"),l=c({name:(G=g.admin)==null?void 0:G.name,bgcImgURL:"",avatarURL:(H=g.admin)==null?void 0:H.avatarURL,message:o.value.message}),N=()=>{p.value=!0},b=c(!0),r=n=>(console.log(1),n.size/1024/1024>2?(_.error("上传图片大小不能超过 2MB!"),b.value=!1,!1):(b.value=!0,!0)),C=()=>{},y=async n=>{let s=URL.createObjectURL(n.raw);await le(n.raw),l.value.avatarURL=s},E=()=>{ke.confirm("当前数据未保存确认关闭？","提示",{confirmButtonText:"确认",cancelButtonText:"取消",type:"warning",icon:Re(S)}).then(()=>(p.value=!1,m.value=!1,!0)).catch(()=>{})},$=()=>{p.value=!1,_.info("已取消保存")},M=async()=>{if(!l.value.name||!l.value.avatarURL||!l.value.message){_.error("请将信息填写完整");return}p.value=!1;const n=await ne(l.value.name,l.value.avatarURL,l.value.message,"");if(n.status!==200){_.error(n.data.msg||"保存失败");return}l.value={},_.success("保存成功")},k=c(["我的审核","我的添加","我的修改"]),w=async n=>(await oe(Number(n))).data,m=c(!1),V=()=>{m.value=!0},de=async()=>{if(!l.value.bgcImgURL){_.error("请选择背景图片!");return}const n=await ne("","","",l.value.bgcImgURL);if(m.value=!1,n.status!==200){_.error(n.data.msg||"保存失败");return}l.value={},_.success("修改成功")},ue=()=>{m.value=!1},me=async n=>{if(r(n),!b.value)return;let s=URL.createObjectURL(n.raw);console.log(s),await le(n.raw),l.value.bgcImgURL=s},T=()=>{x()};return(n,s)=>{var Y,Z,ee;const d=ce,O=ze,_e=D("DocumentChecked"),q=Se,ve=D("Upload"),J=D("Edit"),pe=Ae,K=D("EditPen"),Q=je,W=Ne,z=$e,X=Be,fe=Ve;return Ce((v(),L("div",Fe,[a("div",Pe,[a("div",{class:"info",style:Ee({backgroundImage:"url("+o.value.bgcImgURL+")"})},[a("div",{class:"edit-bgcImg",onClick:V},"修改背景"),a("div",Ge,[a("div",He,[a("img",{src:(Y=f(g).admin)==null?void 0:Y.avatarURL,alt:"",width:"100px"},null,8,Je)]),a("div",Ke,j((Z=f(g).admin)==null?void 0:Z.name),1),a("div",Qe," 账号ID："+j((ee=o.value)==null?void 0:ee.adminID),1),a("div",We,j(o.value.message),1)]),a("div",Xe,[e(pe,{gutter:60},{default:t(()=>{var u,te,ae;return[a("div",Ye,[e(q,{value:(u=o.value.audit)==null?void 0:u.length,style:{"margin-right":"20px"}},{title:t(()=>[a("div",Ze,[a("div",et,[i(" 总审核数 "),e(O,{effect:"dark",content:"该账号审核用户上传数据总数",placement:"top"},{default:t(()=>[e(d,{style:{"margin-left":"4px",color:"#85ce61"},size:16},{default:t(()=>[e(f(S))]),_:1})]),_:1})])])]),suffix:t(()=>[e(d,{style:{"vertical-align":"-0.125em",color:"#85ce61"}},{default:t(()=>[e(_e)]),_:1})]),_:1},8,["value"])]),a("div",tt,[e(q,{value:(te=o.value.addCount)==null?void 0:te.length,style:{"margin-right":"20px"}},{title:t(()=>[a("div",at,[a("div",lt,[i(" 总添加数 "),e(O,{effect:"dark",content:"当前账号添加动物总数",placement:"top"},{default:t(()=>[e(d,{style:{"margin-left":"4px",color:"#85ce61"},size:16},{default:t(()=>[e(f(S))]),_:1})]),_:1})])])]),suffix:t(()=>[e(d,{style:{"vertical-align":"-0.125em",color:"#409EFF"}},{default:t(()=>[e(ve)]),_:1})]),_:1},8,["value"])]),a("div",nt,[e(q,{value:(ae=o.value.addCount)==null?void 0:ae.length,style:{"margin-right":"20px"}},{title:t(()=>[a("div",st,[a("div",ot,[i(" 总修改数 "),e(O,{effect:"dark",content:"当前账号修改动物总数",placement:"top"},{default:t(()=>[e(d,{style:{"margin-left":"4px",color:"#85ce61"},size:16},{default:t(()=>[e(f(S))]),_:1})]),_:1})])])]),suffix:t(()=>[e(d,{style:{"vertical-align":"-0.125em",color:"#85ce61"}},{default:t(()=>[e(J)]),_:1})]),_:1},8,["value"])])]}),_:1})]),a("div",{class:"admin-edit",onClick:s[0]||(s[0]=u=>N())},[i("编辑"),e(d,null,{default:t(()=>[e(J)]),_:1})]),e(X,{modelValue:p.value,"onUpdate:modelValue":s[3]||(s[3]=u=>p.value=u),direction:B.value,"before-close":E},{header:t(()=>[a("div",it,[i(" 修改信息"),e(d,{style:{"margin-left":"5px"}},{default:t(()=>[e(K)]),_:1})])]),footer:t(()=>[a("div",dt,[e(z,{onClick:$},{default:t(()=>[i("取消修改")]),_:1}),e(z,{type:"primary",onClick:M},{default:t(()=>[i("保存修改")]),_:1})])]),default:t(()=>[a("div",ct,[i(" 管理员姓名"),e(Q,{modelValue:l.value.name,"onUpdate:modelValue":s[1]||(s[1]=u=>l.value.name=u),type:"text",placeholder:"请输入管理员姓名",style:{width:"300px",margin:"10px 0px 10px 0px"}},null,8,["modelValue"]),i(" 留言内容"),e(Q,{modelValue:l.value.content,"onUpdate:modelValue":s[2]||(s[2]=u=>l.value.content=u),type:"textarea",rows:4,placeholder:"请输入留言内容",style:{width:"300px",margin:"10px 0px 10px 0px"}},null,8,["modelValue"]),i(" 修改头像 "),e(W,{style:{width:"300px",margin:"10px 0px 10px 0px"},class:"avatar-uploader",action:"#","show-file-list":!1,"http-request":C,"before-upload":r,"on-change":y},{default:t(()=>[l.value.avatarURL?(v(),L("img",{key:0,src:l.value.avatarURL,class:"avatar",width:"140px"},null,8,rt)):(v(),P(d,{key:1,class:"avatar-uploader-icon"},{default:t(()=>[e(f(se))]),_:1}))]),_:1})])]),_:1},8,["modelValue","direction"]),e(X,{modelValue:m.value,"onUpdate:modelValue":s[4]||(s[4]=u=>m.value=u),direction:B.value,"before-close":E},{header:t(()=>[a("div",ut,[i(" 修改背景"),e(d,{style:{"margin-left":"5px"}},{default:t(()=>[e(K)]),_:1})])]),footer:t(()=>[a("div",vt,[e(z,{onClick:ue},{default:t(()=>[i("取消修改")]),_:1}),e(z,{type:"primary",onClick:de},{default:t(()=>[i("保存修改")]),_:1})])]),default:t(()=>[a("div",mt,[e(W,{style:{width:"300px",margin:"10px 0px 10px 0px"},class:"avatar-uploader",action:"#","show-file-list":!1,"http-request":C,"before-upload":r,"on-change":me},{default:t(()=>[l.value.bgcImgURL?(v(),L("img",{key:0,src:l.value.bgcImgURL,class:"avatar",width:"140px"},null,8,_t)):(v(),P(d,{key:1,class:"avatar-uploader-icon"},{default:t(()=>[e(f(se))]),_:1}))]),_:1})])]),_:1},8,["modelValue","direction"])],4)]),a("div",pt,[e(F,{title:k.value[0],"animal-data":R.value,onCloseEditDrawer:T},null,8,["title","animal-data"]),e(F,{title:k.value[1],"animal-data":A.value,onCloseEditDrawer:T},null,8,["title","animal-data"]),e(F,{title:k.value[2],"animal-data":I.value,onCloseEditDrawer:T},null,8,["title","animal-data"])])])),[[fe,h.value]])}}}),Et=re(ft,[["__scopeId","data-v-99aaaac6"]]);export{Et as default};
