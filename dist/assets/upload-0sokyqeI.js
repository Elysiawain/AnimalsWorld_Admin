/* empty css                  *//* empty css               *//* empty css                  *//* empty css                      *//* empty css                 *//* empty css                  *//* empty css                     *//* empty css                 *//* empty css                        *//* empty css                */import{d as R,r as _,o as M,w as j,c as b,e as B,h as a,j as l,t as p,F as O,G as W,l as $,k as Y,Z,B as q,C as Q,_ as F,b as A,D as X,g as i,f as t,a1 as aa,H as z,V as ea,ak as ta,ai as la,K as sa,W as N,U as na,Y as oa,$ as ia,p as ua,J as da,R as ca}from"./index-AMOvtFGo.js";import{e as ra,h as pa,i as ma}from"./Admin-AgsqLEaY.js";import{u as _a}from"./counter-XOgdfSNx.js";import"./Request-ZIjCtDXO.js";const c=s=>(q("data-v-6da83693"),s=s(),Q(),s),va={class:"container"},ga={class:"uploader"},fa=c(()=>a("span",null,"上传者：",-1)),ha=["src"],Da={class:"uploader"},ba=c(()=>a("span",null,"用户ID：",-1)),ka=c(()=>a("span",null,"上传时间：",-1)),wa=c(()=>a("span",null,"动物名：",-1)),ya={class:"picture"},Ca=c(()=>a("span",null,"动物图片预览：",-1)),Ia={class:"img-list"},Ea={class:"detail"},Ua=c(()=>a("span",null,"描述：",-1)),xa=c(()=>a("span",null,"分类：",-1)),Sa=c(()=>a("span",null,"分布：",-1)),za=c(()=>a("span",null,"保护级别：",-1)),Ba=c(()=>a("span",null,"饮食：",-1)),$a=c(()=>a("span",null,"繁殖方式：",-1)),La=c(()=>a("span",null,"天敌：",-1)),Ta=R({__name:"AnimalDetail",props:{animasData:Object,uploadUser:String,uploadTime:String},setup(s){var g;const m=s;_(m.uploadUser);const n=_();let k=[];(g=m==null?void 0:m.animasData)==null||g.imgURL.forEach(v=>k.push(v.url));const r=async()=>{const v=await ra(0,0,m.uploadUser,"");n.value=v.data.data.userList[0],console.log("用户数据"),console.log(n.value),console.log(n.value)};return M(()=>r()),j(m,()=>{r()}),(v,L)=>{var I,f,y,E,o,e,u,h,U,C,D,x;const w=Z;return b(),B("div",va,[a("div",ga,[fa,a("img",{src:(I=n.value)==null?void 0:I.avatarURL,alt:"点击查看详情"},null,8,ha),l(p((f=n.value)==null?void 0:f.userName),1)]),a("div",Da,[ba,l(p((y=n.value)==null?void 0:y.userID),1)]),a("div",null,[ka,l(p(s.uploadTime),1)]),a("div",null,[wa,l(p((E=s.animasData)==null?void 0:E.name),1)]),a("div",ya,[Ca,a("div",Ia,[(b(!0),B(O,null,W((o=s.animasData)==null?void 0:o.imgURL,S=>(b(),$(w,{key:S.uid,src:S.url,"zoom-rate":1.2,"max-scale":7,"min-scale":.2,"preview-src-list":Y(k),fit:"scale-down"},null,8,["src","preview-src-list"]))),128))])]),a("div",Ea,[a("div",null,[Ua,l(p((e=s.animasData)==null?void 0:e.description),1)]),a("div",null,[xa,l(p((u=s.animasData)==null?void 0:u.classification),1)]),a("div",null,[Sa,l(p((h=s.animasData)==null?void 0:h.distribution),1)]),a("div",null,[za,l(p((U=s.animasData)==null?void 0:U.protectionLevel),1)]),a("div",null,[Ba,l(p((C=s.animasData)==null?void 0:C.diet),1)]),a("div",null,[$a,l(p((D=s.animasData)==null?void 0:D.breeding),1)]),a("div",null,[La,l(p((x=s.animasData)==null?void 0:x.predator),1)])])])}}}),Va=F(Ta,[["__scopeId","data-v-6da83693"]]),Aa={class:"container"},Na={key:2,class:"pagination-block"},Ra={class:"dialog-footer"},Ma=R({__name:"upload",setup(s){const m=_(!1),n=_({page:1,pageSize:10,status:0}),k=_(0),r=_([]),g=_(0),v=async()=>{try{const o=await pa(n.value.page,n.value.pageSize,n.value.status);r.value=o.data.data.auditList,k.value=o.data.data.total,m.value=!1}catch{z.error("获取审核数据失败"),m.value=!1;return}};M(()=>v());const L=_a(),w=async(o,e,u)=>{await na.confirm(u===1?"确定通过该条数据审核吗？":"确定不通过该条数据审核吗？","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(async()=>{const h=await ma(e.auditID,e.adminID,u);if(h.data.code!=="1"){z.error(h.data.msg||"修改失败");return}o===-1&&(f.value=!1),v(),L.setBadgeNum(k.value),z.success("操作成功！")}).catch(()=>{z.info("已取消修改")})},I=_(!1);j(n.value,()=>{v()});const f=_(!1),y=_({}),E=o=>{f.value=!0,y.value=o,console.log(o),g.value=r.value.findIndex(e=>e.auditID===o.auditID)};return(o,e)=>{var T,V;const u=oa,h=ia,U=A("DocumentChecked"),C=ua,D=da,x=A("CloseBold"),S=ea,P=ca,G=ta,H=la,J=sa;return X((b(),B("div",Aa,[((T=r.value)==null?void 0:T.length)>=1?(b(),$(S,{key:0,data:r.value,stripe:"",style:{width:"100%",color:"#6C6E72"},onRowClick:E},{default:i(()=>[t(u,{label:"上传用户ID",prop:"uploadUser"}),t(u,{label:"动物详情",class:"detail"},{default:i(()=>[l(" 点击查看 ")]),_:1}),t(u,{label:"审核id",prop:"auditID"}),t(u,{label:"上传时间",prop:"uploadTime"}),t(u,{label:"审核状态",prop:"status"},{default:i(()=>[t(h,{effect:"light",type:"warning"},{default:i(()=>[l(" 待审核 ")]),_:1})]),_:1}),t(u,{align:"center",label:"操作"},{default:i(d=>[t(D,{size:"small",type:"success",plain:"",onClick:N(K=>w(d.$index,d.row,1),["stop"])},{default:i(()=>[l("通过"),t(C,null,{default:i(()=>[t(U)]),_:1})]),_:2},1032,["onClick"]),t(D,{size:"small",type:"danger",plain:"",onClick:N(K=>w(d.$index,d.row,0),["stop"])},{default:i(()=>[l("不通过"),t(C,null,{default:i(()=>[t(x)]),_:1})]),_:2},1032,["onClick"])]),_:1})]),_:1},8,["data"])):(b(),$(P,{key:1,description:"这里什么也没有哟~"})),((V=r.value)==null?void 0:V.length)>=1?(b(),B("div",Na,[t(G,{"current-page":n.value.page,"onUpdate:currentPage":e[0]||(e[0]=d=>n.value.page=d),"page-size":n.value.pageSize,"onUpdate:pageSize":e[1]||(e[1]=d=>n.value.pageSize=d),"page-sizes":[10,20,30,40],disabled:I.value,background:!1,layout:"total, sizes, prev, pager, next, jumper,slot",total:k.value},null,8,["current-page","page-size","disabled","total"])])):aa("",!0),t(H,{modelValue:f.value,"onUpdate:modelValue":e[4]||(e[4]=d=>f.value=d),title:"上传详情",width:"60%",center:""},{footer:i(()=>[a("span",Ra,[t(D,{type:"success",onClick:e[2]||(e[2]=d=>w(-1,y.value,1)),plain:""},{default:i(()=>[l(" 通过 ")]),_:1}),t(D,{onClick:e[3]||(e[3]=d=>w(-1,y.value,0)),type:"danger",plain:""},{default:i(()=>[l("不通过")]),_:1})])]),default:i(()=>[t(Va,{"animas-data":r.value[g.value].animalsData,"upload-user":r.value[g.value].uploadUser,"upload-time":r.value[g.value].uploadTime},null,8,["animas-data","upload-user","upload-time"])]),_:1},8,["modelValue"])])),[[J,m.value]])}}}),ae=F(Ma,[["__scopeId","data-v-78c91459"]]);export{ae as default};
